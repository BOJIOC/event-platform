<template>
  <v-container>
    <!-- –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º -->
    <div v-if="!auth.isLoggedIn()">
      <h1 class="text-h4 mb-2">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å üëã</h1>
      <p>–≠—Ç–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–Ω–æ–≥–æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π.</p>
      <v-btn to="/login" color="primary" class="me-2">–í–æ–π—Ç–∏</v-btn>
      <v-btn to="/register" color="success">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</v-btn>
    </div>

    <div v-else>
      <h1 class="text-h4 mb-2">–ü—Ä–∏–≤–µ—Ç, {{ getEmail() }}!</h1>
      <p>–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª <router-link to="/events">¬´–í—Å–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è¬ª</router-link> –∏–ª–∏ <router-link to="/my-events">¬´–ú–æ–∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è¬ª</router-link>.</p>
    </div>
  </v-container>
</template>

<script setup lang="ts">
import { useAuthStore } from '@/stores/auth'
import { computed } from 'vue'

const auth = useAuthStore()

const getEmail = (): string => {
  try {
    const payload = JSON.parse(atob(auth.token.split('.')[1]))
    return payload.email
  } catch {
    return ''
  }
}
</script>
